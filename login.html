<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SHE BAKES | Login</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
:root {
  --bg-dark:#1b120e;
  --bg-card:#2a1a15;
  --accent-gold:#f4b27a;
  --accent-warm:#c1784a;
  --text-light:#fdf6ec;
  --text-muted:#d7c7b8;
  --max-width:1200px;
}

* { box-sizing:border-box; margin:0; padding:0; }

body {
  font-family:'Poppins',sans-serif;
  background:radial-gradient(circle at top,#2b170f 0,#140c09 40%,#0b0705 100%);
  color:var(--text-light);
}

a { text-decoration:none; color:inherit; }

/* NAVBAR */
header {
  position:fixed;
  top:0;
  width:100%;
  background:rgba(20,11,7,0.92);
  backdrop-filter:blur(12px);
  border-bottom:1px solid rgba(255,255,255,0.07);
  z-index:100;
}

.nav {
  max-width:var(--max-width);
  margin:auto;
  padding:0.9rem 1.5rem;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.logo {
  display:flex;
  align-items:center;
  gap:8px;
  font-family:'Playfair Display',serif;
  font-size:1.5rem;
  color:var(--accent-gold);
}

.logo img {
  width:40px;
  height:40px;
  border-radius:50%;
  object-fit:cover;
}

.nav-links {
  display:flex;
  gap:1.6rem;
  font-size:0.95rem;
}

.nav-links a:hover { color:var(--accent-gold); }

/* PAGE */
main {
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding-top:6rem;
}

/* LOGIN CARD */
.login-card {
  background:var(--bg-card);
  padding:2.2rem;
  border-radius:22px;
  border:1px solid rgba(255,255,255,0.08);
  width:100%;
  max-width:420px;
  box-shadow:0 20px 40px rgba(0,0,0,0.75);
}

.login-card h1 {
  font-family:'Playfair Display',serif;
  text-align:center;
  margin-bottom:0.5rem;
}

.login-card p {
  text-align:center;
  font-size:0.85rem;
  color:var(--text-muted);
  margin-bottom:1.8rem;
}

.form-group {
  margin-bottom:1.2rem;
}

.form-group label {
  font-size:0.8rem;
  display:block;
  margin-bottom:0.3rem;
}

.form-group input {
  width:100%;
  padding:0.65rem 0.9rem;
  border-radius:999px;
  border:1px solid rgba(255,255,255,0.25);
  background:transparent;
  color:var(--text-light);
  font-size:0.9rem;
}

.password-wrapper {
  position:relative;
}

.toggle-password {
  position:absolute;
  right:14px;
  top:50%;
  transform:translateY(-50%);
  cursor:pointer;
  font-size:0.8rem;
  color:var(--accent-gold);
}


.forgot {
  text-align:right;
  font-size:0.75rem;
  margin-top:-0.4rem;
  margin-bottom:1.2rem;
}

.login-btn {
  width:100%;
  border-radius:999px;
  padding:0.7rem;
  border:none;
  background:linear-gradient(135deg,var(--accent-gold),var(--accent-warm));
  color:#341a0d;
  font-size:0.9rem;
  cursor:pointer;
  margin-bottom:1.2rem;
}

.register {
  text-align:center;
  font-size:0.8rem;
}

.register a {
  color:var(--accent-gold);
}

/* RESPONSIVE */
@media(max-width:500px){
  .login-card { margin:0 1rem; }
}
</style>
</head>

<body>

<header>
  <div class="nav">
    <div class="logo">
      <img src="logo.png" alt="Logo">
      SHE BAKES | MADHU 24MIT028
    </div>
    <nav class="nav-links">
      <a href="index.html">Home</a>
      <a href="menu.html">Menu</a>
      <a href="login.html">Login</a>
      <a href="orders.html">My Orders</a>
      <a href="#contact">Contact</a>
    </nav>
  </div>
</header>

<main>
  <div class="login-card">
    <h1>Welcome Back</h1>
    <p>Login to continue your sweet journey</p>

    <form onsubmit="handleLogin(event)">
      <div class="form-group">
        <label>Email</label>
        <input type="email" required>
      </div>

      <div class="form-group password-wrapper">
        <label>Password</label>
        <input type="password" id="password" required>
        <span class="toggle-password" onclick="togglePassword()">Show</span>
      </div>

      <div class="forgot">
        <a href="#">Forgot password?</a>
      </div>

      <button class="login-btn" type="submit">Login</button>
    </form>

    <div class="register">
      New user? <a href="register.html">Register</a>
    </div>
  </div>
</main>

<script>
function togglePassword() {
  const pwd = document.getElementById("password");
  pwd.type = pwd.type === "password" ? "text" : "password";
}


function handleLogin(e) {
  e.preventDefault();

  const email = document.querySelector('input[type="email"]').value;
  const password = document.getElementById("password").value;

  // ðŸ” ADMIN CHECK (FIRST)
  if (email === "admin@shebakes.com" && password === "admin@123") {
    localStorage.setItem("isAdmin", "true");
    window.location.href = "admin.html";
    return;
  }

  // ðŸ‘¤ NORMAL USER LOGIN (MySQL)
  fetch("http://localhost:3000/api/users/login", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ email, password })
  })
  .then(res => res.json())
  .then(data => {
    if (data.error) {
      alert("Invalid email or password");
    } else {
      localStorage.setItem("loggedInUser", JSON.stringify(data));
      window.location.href = "index.html";
    }
  })
  .catch(() => alert("Login failed"));
}


</script>


</body>
</html>
